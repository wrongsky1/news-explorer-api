# NewsExplorer. REST API

---

## Стек

- Node.js
- Express
- MongoDB

## Директории

- `/models` – папка со схемами и моделями пользователя и статьи
- `/controllers` – папка с контроллерами
- `/routes` — папка с файлами роутера
- `/errors` – папка с модулями ошибок
- `/middlewares` – папка с мидлварами

## Запуск проекта

Для запуска проекта:

1. Клонировать репозиторий
2. Установить зависимости `npm install`
3. Запустить проект `npm start`
4. Проект запускается на http://localhost:3000/

## Публичный IP-адрес

178.154.226.192

## Домен

api.newsexplorer.students.nomoreparties.co
www.api.newsexplorer.students.nomoreparties.co

## Запросы

### Регистрация

POST http://localhost:3000/signup

В теле запроса передать объект вида

    {
      "email": "example@example.com",
      "password": "password",
      "name": "name",
    }

:heavy_check_mark: При успехе в ответе приходит объект пользователя со статусом `201`.

:x: При попытке создать пользователя с уже существующей в базе почтой приходит ответ со статусом `409` и сообщением `Пользователь с таким email уже зарегистрирован`.

:x: При попытке создать пользователя с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.

### Авторизация

POST http://localhost:3000/signin

В теле запроса передать объект вида

    {
      "email": "example@example.com",
      "password": "password"
    }

:heavy_check_mark: При успехе приходит ответ со статусом `200` и сообщением `Авторизация прошла успешно`.

:x: При неправильных почте и/или пароле приходит ответ со статусом `401` и сообщением `Неправильная почта или пароль`.

### Информация о пользователе

GET http://localhost:3000/users/me

:heavy_check_mark: При успехе в ответе приходит объект пользователя (email и имя) со статусом `200`.

:x: При попытке получить данные несуществующего пользователя приходит ответ со статусом `404` и сообщением `Запрашиваемый ресурс не найден`.

### Добавление статьи

POST http://localhost:3000/articles

В теле запроса передать объект вида

    {
      "keyword": "keyword",
      "title": "title",
      "text": "text",
      "date": "01.01.2020",
      "source": "source",
      "link": "https://yandex.ru/",
      "image": "https://thecode.media/wp-content/uploads/2020/11/photo_2020-11-06-12.14.52-1080x718.jpeg"
    }

:heavy_check_mark: При успехе в ответе приходит объект статьи со статусом `201`.

:x: При попытке создать статью с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.

### Удаление статьи

DELETE http://localhost:3000/articles/:id

:heavy_check_mark: При успехе в ответе приходит объект статьи со статусом `200`.

:x: При попытке удалить чужую статью приходит ответ со статусом `403` и сообщением `Необходима авторизация`.

:x: При повторной попытке удалить статью или попытке удалить статью с несуществующим в базе id приходит ответ со статусом `404` и сообщением `Нет статьи с таким id`.

:x: При попытке удалить статью с некорректным id приходит ответ со статусом `400` и ошибкой валидации.

### Получение всех статей пользователя

GET http://localhost:3000/articles/

:heavy_check_mark: При успехе в ответе приходит массив статей со статусом `200`.
